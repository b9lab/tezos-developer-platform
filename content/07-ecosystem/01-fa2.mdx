---
title: FA2
description: A unified token contract interface
slug: /fa2
---

import HighlightBox from "../../src/components/HighlightBox"

import {
  ExpansionPanel,
  ExpansionPanelList,
  ExpansionPanelListItem
} from 'gatsby-theme-apollo-docs';

There are many considerations when implementing a smart contract, especially one that is the basis for tokens, from which language to choose to what standard to implement. We have talked about smart contract development on Tezos and how to work with clients, let's now focus our attention on the implementation of **standardisation** when it comes to tokens.

Let's first begin with a general definition on what is meant as a token in the blockchain world:

> A **token** is _a digital representation of an asset or utility_.

The first challenge, when it comes to creating tokens, is deciding on the **type of token**. One can differentiate between fungible (like [ERC-20 tokens](https://youtu.be/cqZhNzZoMh8)), non-fungible (e.g. [ERC-721](https://youtu.be/HTm-1JtI0fA)), and even semi-fungible tokens, also known by their abbreviation NFT. In addition, tokens can differentiate in their transferrability.

What is meant by **fungibility** when talking about tokens? Fungibility addresses if a token is **interchangeable** with other tokens or not. Non-fungible tokens are important when a token requires a certain degree of uniqueness to be valueable.

Now, one could ask: Why is **standardisation** gaining track?

The **demand for token standards** has continously risen, especially since the development of ERC-standards and the STO wave. As a reaction, **FA1.2** (TZIP-7), a token standard, was released in 2019 leading to implementations in among others SmartPy and LIGO as well as financial use cases for fungible token contracts.

## FA: A unified token contract interface

**FA2** is a **token standard** on Tezos. The standard is based on a proposal for a unified token contract interface. It addresses two aspects of importance to token standards: **Token type and permission standardisation**.

It was meant to help support **different token types**. While FA1.2 was tailored to single fungible token smart contracts, FA2 allows **single- and multi-token** smart contracts for a variety of tokens. Thus, FA2 maintains the functionalities from FA1.2 and adds token creation possibilities, i.e. allows for greater tokenisation on the Tezos blockchain. FA2 being applicable to different types of tokens is meant by saying: FA2 is agnostic to the token type.

<HighlightBox type="info">

Take a look at the [proposal for FA2 (TZIP-12)](https://gitlab.com/tzip/tzip/-/blob/master/proposals/tzip-12/tzip-12.md)?

</HighlightBox>

The **main aim** was to create standartisation that allows for a variety of implementations for different token types, while providing widely-applicable **common interface standards** to integrate wallets, exchanges, and external developers. This was especially challenging in regard to the longevity to the standard: As Tezos is a self-amending protocol with evolving functionalities, FA2 needed to cover a broad spectrum to maintain its compatability in the long term.

When it comes to the **standardisation of permissions**, standardisation brings the benefit of increasing trust in external smart contracts and centrally managed tokens. For this reason, FA2 standardises:

* transfer semantics,
* metadata,
* accessing balances,
* total supply, and
* permission rights.

<HighlightBox type="info">

Remember the role permissions play in the deployment pattern of a blockchain? If not, take a quick look at the section [Main Ideas Behind the Tezos Protocol - Managing Chains](../blockchain-fundamentals/getting-1).

When we talk about permissions regarding tokens, they can be understood as:

> _the rules that determine who can send how many tokens, receive them, and manage tokens for other users._

</HighlightBox>

With FA2, those implementing the token contracts can configure freely:

* the token type(s),
* the token management (administration, whitelisting, etc.),
* the supply operations (minting and burning tokens),
* the permissioning architecture, and
* questions on contract upgradability.

Specifically the **permissioning architecture** relates to whether permissioning is determined in the contract, i.e. a _monolith_, with a transfer hook to another contract, or a seperate wrapper contract. Each of this options represents an FA2 implementation pattern for permissions.

### FA2 permission implementation patterns

We can differentiate three implementation patterns:

* monolith,
* wrapper, and
* transfer hook.

In a **monolith smart contract implementation**, the permissions are included in the FA2 token contrarct. This is often considered as the most viable option for Tezos when considering gas efficiency because calls in a contract are more efficient. Monolith architectures do have disadvantages: They are less modular and permissioning is less flexible. In addition, upgrading the permissioning often requires re-deploying the smart contract or a migration. FA2 addresses this last aspect by including specifications for operators and signing-off permissions for tokens to another contract, either a generalised or application-specific permissioning contracts.

In a **wrapper implementation**, the seperate wrapper contract is on-chain and applies permissions by forwarding calls to the main contract, which manages the token ledger. Wrappers allow for modularity and extending the functionalities of the main token contract. Moreover, they allow for upgrades and replacements. Thus, permissions can be changed without having to change and re-deploy the contract. Wrapper approaches can lead to fragmentation, increase complexity, and decrease the adoption of a standard due to multi-wrapper support.

When using **transfer hooks**, the main token contract calls another contract, which includes the permissioning specifications, i.e. "permissioning policies". Its main benefits are a seperation of concerns, granular permissioning rules, and the possibility to upgrade permissions. At the same time, transfer hooks bring gas limitation concerns, as do wrappers. Additionally, permissioning policies are more complex and the contract size increases with contract use because of increasing permissioning policies.

## FA2 entrypoints and data structures

FA2 **formalises token design**. Thus, a specific list of entry points and related data structures have to be implemented. 

Therefore, every contract **must** contain the following entry points:

- Transfer
- Balance_of
- Token_metadata_registry
- Update_operators
- Is_operator

<HighlightBox type="tip">

You can find an overview document of the semantics, metadata, a set of standard errors and error mnemonics used for FA2 implementation [here](https://gitlab.com/tzip/tzip/-/blob/master/proposals/tzip-12/tzip-12.md).

</HighlightBox>

# Implementations

It is recommended to audit such a token contract. Therefore it makes sence to look for community implementations. There is a [LIGO/Michelson implementation](https://gitlab.com/tzip/tzip/-/blob/master/proposals/tzip-12/implementing-fa2.md) and a [SmartPy implementation](https://smartpy.io/ide?code=eJztPe2S28aR__UUc1DlREoktbu5JOW113WytPLt2fqItHZSUVQgCAyXyIIADYC7S@Wc8lvcn6Tqft2D3L2Jn@S6ez4wAwxAcHeVkx2xXBaXmOmZ6env6WncvXvn7l0G_52kZZ5F67CMsxR@wl9fc87KBWdPHx2wogzSKMgjFvF5nMbY6hDbfLYoy1Vx@PDhWVwmwWwSZsuH5bt4Jf43fjhLstnDZVCUPH@4yrNVVgRJQQ_H@wcPPzdGWmY5Z_wqWK4SXjyMsnC95GkZ4EgsKNvGKpZZGvHy4Tw4GBfLIC9Xm4efM5ir1SEoCl4Wk_K7kr_LCuoIA8A8snOejsMM1h6EZYFQHu6PLVgTnGK8XGV5yeSPLChYsZJTh_@e8TIYv8yzszxYLuP0jD3O0nl8ts4DA5mngMgpYNIP6eGUhQnMii2yJCoIy0uEsjKghCYUmoboUgE5vMPgAzvCfB83xfcHBU_mI_rZ@kR8tj7zl1nEG48YO2JPYVO4o1sB80i4T@jboVuapf58nZ7Fs6Q5Xnu3IIr85Rq2yIftSIs5z3t1y3kQBa6RRLfTfO3qNc_ykPtJsMnWZdG7V7FeISX42YrDvmR5v16APyBm3LSCh@syvuA@UZ4fw963jwXwsWEZJD6Om2z6jJUE7zY@ME6@8VdZnJZFB@YabQH9SRkDA6pOzT7Dwzv6x3huENah1RbpcLLc@MtgBbCK1QS@6AYcIG9pPovPfLOLYKBsReJgWo06ZcvgnAsOCpG8z3jKBcuwtTH_u0AmZ@skyKH9qmBxChIpiFg2ZzDSGH8bsQVPQ87iUoKENisu5GEFBTrgUCAOS67@UPKD8aCIeT6pEETLspjoyOIpa3lxYa1FwiyCCxguW8LKQOyAYCO6CM44m22M7pdZfo5CI0uBTIC2CYgQb3HEpnvT@qwsHj2yWNYAe5wSnxA0aDIWTeIkLjdq9TQIYC@e8An9MIdpGyDKRVAyomImqXgBCykzNuNsvz4rzctHmq1rJDBVv08VNQDeApbwsyDcAJCyRDTQoJecnXO@YkGerUEhGJuokDSDHV@AUCfUrdY5qCdeTKqWRp9vCp6PgzAEUMBTQY6wVyUQCQwuSejQaD4drKlDFOUcZPZ9vRdDNv6cZZdApMUClGAMCJ66R3wqd_GLYLZJYJ2gG8oszJIRzJ8DEiNEIoxSoURx7dSAAhPM8ghEqWr88tHjrwB3KcE@55tCbaRcRX1LbEF5ZAvO2uYgw8TzOBT8l_Pv1jEsnwVJAvMAEwBIg4_nOdA2IjznIUzNhIHkfRHkcYA4FiRyP4_PFiXo6OWs@PS@2lOLvoAAVgFoTV6KZUIvwgZ8hW4r3CsQ1zDvZYAM_s8kKMZF_I43WLUu3o8aEr8hkWRLEqNjKXKD5DIAxC6Qd8WEAME5H7HZuhRfgWoNSNKo4kCWAe7SOAxgq5BCAYSgZ76kxSScWvHlCjhwUNBTA5CSDYhIlBeXINPYtL6GKfLMlEhlWEfBFl3V9bhGuwFQLL@Is3XBLoDakSIkpZ3@4eSlTSsjFLuXgQki5SFwTpBvEIPExygQz7UEBmEKX5G0hARCSjclp5upTquuqltBiE6zS8BeDOCCiyBOkIA@rdGWAeZsHUccrbdLnF2M@4LWKqzCFAInczYtQU1PkWyjLL1Xwqp4BJgBjk2seTDA34j9aV2UtFycDQA3YAHtbiTpAEE3CLdpKxw5DAgD3u8WHKHhaNROynJoO5YAECs8CBdygoOUX@HkLNZTOgaN1ygogyY5NW26I4ehZwB9FAGCUsFPjPhJ67MgAsM4LkrBcTBzDRNgQdsSOsVAERtb_plUca9gsyBBOVCfqctwavy2pYtpP7U_bCFM0D2kV3784a_I6UCDyBk__vA3qehIUL9GF@TlBsVpxp7F4QJsKfQOmiDBOGsuCeVC@8RsmywPYpjR8VXIafhBwxb0HgdpmpWomC6AHXYezhtWW5ACiwHSPHBuvD72JbV_AB3G1MLqY1pYbb3MNlZn0xBq65zO7T5Nem7rSa1q45Xa1GkdL_NVk0ZfSx13ABAtGt3rqqEDQrYqGt271EEHKGiTBo7JNARWJ4wS2nid9N7WPeFbOrawhAVh6dnSQJIw_nNHRgYera_AVkYd9hhddy444tsgWfPCiAtUMRWQTjwB2V9pFGL4Z1@Py81KdgfqDEVblItoLoGKRVAiSgG2E6PGFDJQu@HjT8K1On0elHdkLOE4z7PcX6KiPeNt4QQZiRge2usVvwJM8cV@CKp_Hl9JjvY9DRk9HAm1GB4C5ZfrHHSL2ecBPNHtxfzBfEcU8YgaQj_xkb2F84iAvdMXXx0_9795_uT46cnz4ydeBQi8ufUczI0YkOpLFaChNQGdPH_9zdOnJ49Pjp@f@l88@vrR88fHBjSgVs0y9pyc03r@4tR_8fL41aPTF6_qUNAVaIBoh_K758cmCDWJAnAkebnCUhOEmsRrwNHrb16@fPHqlLCkKDFc5zmXBETkBc5NUIKWiSpdKzWqbeujE0ZEOM8SIODiUJL3dDrNwmCZ4HcCapgBf8YfGQN_YOmzQyZ9pU_Fr@VVcahawF9ZswVjirjhkfqqnwVL9NTgCQga@eP3LAHjAb9X32B@mhFhDYIrpEID@44ngF9yRUKQwKUwrCuXmFYEWrlYg5nEBccS37GTEu144ctbYT8AFQHiQF1eGhYYJ7eAVb4OkxJ9Ihn1C9yFmnq5Eadi5zNeapAkICTh6N7llSk3XpG_NsC9ED88EvvhiCyZH71LR8ySRlu6yQ3UImtoqfhqWZMODVjNX36biGZNW2bgwbK8Ef0r5gh_eGIO3nBota_@spBnY0lQ9S54UlMuZK@vgUQHct7DYevMWz4Dj2aAqwCQ5hKkVLDmbpOEgxKUKFHzog1o0s_QELglX0qqpJmMcGkGxAuxzNxGV9WUNq1oTBu6FHKOPr9a5YOLEWufjBRCL6SU9MmXmwqFi9xJEok0q_Ixpr9Yr8CT4Vq8F1PTt1f8aEO8TX50saFNWhYJkP7oojMzltHWpo1Fr8VzCERR68Cj@RFjqYkQSSomGzoI02UsEJiRXsxIz9OkUYuiFGJEzxa2MZCjQbc0deBoO3HmJnFKmtS6lghp@jWPzoBiz_nGoEsRmqvUMB0QBaB5E2rNBhisG1LMUZD4mJ2k7D64jipaiC4T@I4UMQvAR9TBqBBDJlOY6SoIz6cTq7PwisYiVG1CCMEjp@AEhhBxMhjdBF9aamTFFdVabokjDArAEeW2G73xV7HtNuJFa4PgDaFN4QxHH3ow6skB7U4mjAbOAwyAc@g489DtaC9iNWexwrZh3a6iJD8BsXNIRaa4@QPRXlDkUxkDC8CjAPdEWXmS3sA0ErGpautVGIW9lFE@hCIDfTqm7AwIR@KsF0Pf@ZKefFoFbxAKv4I_BJxlsFHdWEbm0jzmSVSnOJrzYVOQujWYlKNyBXUTQ9OdfO6EkddBqMaavZM4PQdvrrzkQG1amZABKWJZRJaC2TeyAYaF6VyB3Dk8WriPrinah_cRpVMp1f73PyvJBd_12cJUbJ5w_dD_ZKq7OCWRIX4wPTHYRMH_QIb@lPVqxlflMbqASS1JdnwD_DxtKELNBzdm@jhNW@zR5h5uVX_2p48ytD9tqrGjy3Bn7Yerht1wrnkXAUANDfQNe8mC0y82JS@aMteBeGMi4rR2UKKeOhJP9BKGIMaEGBF4RoqxmQt1xA6qHePLcqDdFHxj27ep@dZdH7onY6sQ@WjU3InrSXQJr79Ilx0qZIOcUfEWXvZDNjR8o2MGtFHtvd4KLKxhg_WQOV9mF3zXUSOe7DZyJS8Kf8mXMxlG2WFITdUlbkYJ9lUx6Dv88I72zEnw@9n80MDAdyAx@@ig3Wz5Vju9KXFMIWPMq1hhqLZrYuTeWaO2TVd0pJXChCo8TOzlNzmtqXir@cu@uALZzJKSRpB2V@yi4TvDE0Qx7GN5IjSwJm7hpzZ1OTXLP29ddcXvzcUVuDo1Ha8ipVPaMmRhHw_T_k5e5TOQ4vjv6zIHm3ZUaYR223dLnF5Hdc2gkX00KfZ9xNTBocz8KYc9VFYlabTwBUtFeqMSRSiNTQRVgnqAjxxumYkuNSs3sOthA4FMzOVuXyh2cblCIixVIe_Gc6uUam2f5EjdQafaHupZbV@ganpHW82OY_0CWq@AM4H1wXWYYYrENA3KKa4VnVs6glJpRsIQJl8E7VXjYAqkeE69wawOy3UAhuwARwNQw6k8gZpob_or8IVk4kUzXwA8oPk6kY55LhoGYbgmC57jkQqTRyqF9K9f1jIhtjlIlHiA4@IY6sBHOEcgPjlmhcCDQeVW6PQalRgUYYbBZVwu8Dy5Qic49MOJJW5Ahdye6U55KVss2P5nhoIkPDyiRbTHIHrDII9iwMSkhYxhNwd7_cxeADso3REv23BCKiWb4uI2FgUjAxHE881AwmVHR@wCFAJtx_jkCWz8IlsnEaYNGfA8OwgtO9MqKL3yalDNkz1g@52SVPXGRV5Ua7asoNteuNIKF@wzBbmniLAMNHO6khjs6d7iXCXEXuSU8HSgl1Ulh5@ok1zB4ZLtlfGhAtR29gDlZwWpzPsAPjYC0CpN9VIeG1PCKrA4BmJjCtjhAAiUmPzwDukOC_xAJcOMRG6TispXlEnckWLW4NFRlVCFknpi5eAMVT@tXAXASQRWDuyMSO1qROEcHZRKI4MEZ2u0TCMnWKvn8I6dZq_y62frGBPsgyqhFnM4kWzOUEoCkq3TOYzOBClpDyvXSMc5xdEeCqN0AbiiPEY8s1Bgckz2WsThojrCL2TGcB7TfldXKWgwNueXMrIVyhwBnFcUqR@z5RLoZs4DILQqsjNmv0PFpIOxQFhCObzB0K5hJU_fDtQtiMvLy4m8wjCJs4cRv3iYc6AHpKfJolwmd60ciKEAiFnHWgWZidPrgvQepgAFIh_BzDUN8BhYQLDJWOR0KcVIOl8mLVJkD3hBmRMFGaSCGdgqAeWGtyUoRorpqrizYoBiA5NaopmAjQS@BbBqdkIXBlrhKk08LpTZuw4XesVTTz72D_YO9vZ@vXfg450Vf_bJ_q_nvzzwpoc0iJHXCNs_1vdDUjkxbHMG_ImbGJcqpkrpj29gtlkRw9I31Q65LtEMybSp4FWZ4UJLZDO@mVhXQ3KODKxEzHCLaq_MyBG7f59fQSdf7shOGR_cTCWBNlZqycDoP7T7ZUYAEbqZ8cQ@vUgKmP3oh46epWH14DUK48@OXok@2YA@1THH1nG0M6eH0r909J1Zp_3481EtA8DdGfSdrfC2JKaJiapDU2opnDNDDgxsANZgcpgteVc6EXSeBGcDD1uPzXRp9IbFcYrXC3pLclafYYzUQ5t4VZajj8JqGb8jmeEn_IInmMQE3BNA13ECCreW9oUsZQca5JnJUcNrcoVPVZjUPMgw_VJHAKjYEbSLHNuHqHyKoyaDijSiWg8Q9b6aWJPHJsInqPVRMsfwF@0GNVFURVNEzui_2kSqRZzFHzX7hvCkbRz2F7F9BUgMUKDRYGgkdjQtlJGLMxsBBNmXPEMjX0qAsMhVZlr5ZDwc6dYTSoAwGypwV6Q@VDNMj2oQwd1qdeWVNIzY52xvxCqx7J2@evT89dPjV_6Lp_4fjl@9qPkV@Ol91NnEKoxbBSmPcGjPPFQ@rO4kfQYT6zF2Z35q2yy64xUy3RB23jLyKqt3OGT_sQ2EvX9HrOq8tW@Tq@wItjC0NR_2Shtq@ZizvAkcvbqbADFowxEUtj8VwTaNi4mVfTls0lDTTWus5kMglJvjgHJHHQgwPDlNT0JCV350393onEU9PdcxF7oGI2URWPJ74i4MRtsW6D@k2WVzq2D@IAdsITZ07yjJS5UFYltqQllZLGDR4BZR1ooTA6lisDd6Em8n6mzjc0xfU85pO347sevMWXagGD9l1okFWrffZ_091kZEHBQ@BttaV9YH0NjAUdtuKIVggDKIWKy6hTac05Bdqkk8MHaqbRJbJErrIHXDTu1F25o7h1qBCu22fmb6NKrN_rnLhLVDiTVLHqQicC47iiQP_Jl0dlHciuFknJE1j@@qrriAub_KM7z358ujsgH8W9vdLjKH1hN5Zotf3aTeRzpavdvY9yaicRtlt5C1wYJ1mrOo2kVZIt3LzbHVCVArlVdHvT0a48c4zq5lRVa7ZMYGe6dkOAGq5yN9qNwBsJm31dgdNx9@RKP5qdC4Z@XxyiPyJAuDBE@9xak6euAyaKsOwrEsxKDB9JZQ0BFf14wlOHWW3ts67ZsAYAk27VtiHJbkOSGJ4iODveHInKzhpmbzebgAnvYvYn45WK1zLqt32GfO5p0kkl4G93ueR9dTYnmhxGg_ZQhWngVE6CNieHG8fzCBTk6xXDu_@G7UmeDRK8HOJiq6YGY@3pKeUiH5RqL9VsT6dUV6JRe65TLQRacGr18@6IhjNAMUrdk734qaCs3dxXCZmRPZDK0aIY4mvkSmV38Iw_Y0uG5HXwZBBHZaIir0oSi_aAZkg7EaLKVQgI2C5xj5mduyEmcD@ZnoMvBMtHjUFUB22Jia8gbQbiJZZqeYAH62e5tuI5mm0IgpqPPrG0YT9IKu1bFXsqW7b7ebUt@xGiX@VDfNSJ28eRTo2lvHbrZ7rG0DHXWfgK@DOMHdHDgErvt261AqV1n7Bf6jKgRBXhrlmcQRK9ZbwbsrM850f8rZWZ8t1BGuKAaBAGUyqXRrWnPPZ1mWDET1lPc7kRpJyeRWoqqt86oOBG0o6ojQOBbcdSSdGVCRqdW_W8Oh2nIN1xGq38pi9olMc0agmAR4Ey@0zS346CYBPYhotn29Yqj3sk7pzrsWCFZnesarZMbaUrsmDH2M_MdzOwPoZhNW03lzjtGRC3PCSzxu7DlLanuLGL2LCRWiRk@44OE5Zd4RclMs4DXjIX5nl_yevDBDIKs0tN5nJtXkpPNyvfOS2njtZUsa46mL1UdsH0Z7_vRUDSUfwED7XlvE5C@OAz47d15wnz4SvNaBQQ0zrR6oOftQFKNBumDlZQxeaYEFOQiG18_FUAiSbk5jGjY1WziwrS1j@R1Ado8AdfsWGMm09tgcqqXmYgOYM2JZS7VqW0Hd26ovvWaMUTyzc4oN2G9qIN@2HW_TtJtUo4sK2GlnzYbG@bRsWqU1GxKrGrZNwvbw_mtAhFCDH@0AgP7@SmbBN4pvsW9enejbwmfxBU9FA6PSlajLprO@qiQ1mVMXbdJgGYdjnCwmIPNlVb9OA1lmRcnmCb@i2pHhIouV3VKfqumlwlSqmJLDb64LHLoSC53YA5CK7UcVrrwGC5UW@cA_b82rGXcqfYJXfqqOm@UMKy1iMZ8RFexYgl1lbsi_UWmQKjEO0YQZaRXl_PvrF8_ZDC9SqFuZFWKMGxIYAUuoGoq5truwzeJIWATol6rUF7uk4oiYah8keHdso9PueGSB8NS0PXZI5iFOxc_mMq9u4P0i8tgvqsXZSPZw6S098VG9ucBYSwfxsML792jCV2w0cFgrIwd_jbSVMGpatqPKqBsxgxF34USq7ikld934A7r@kpdU8k_U4hMZL0Eu70rHtBRH@cEaQ5hhIluNmtnMdT0y3C2gGGWAfwEd2LQo3ULlUXGuq9AE8l78yRP0Y6iTSbC7cHLHmTOMv9tCKgzc2q0CY6LwDYlusDdiLUhXnZyua2O9VdeJuk892HHB5gUc567teMOnfVtIGE7MnluWu4UA7NE8q5akUWqOR95uGAHz3Sq1NWLfrXm@aQmG0rMWfWFeR6sHrLfaqTveNBd9nNfNd6rl0@cO@XZ1@r4yjgjbuwaZZKedo0uiX9OQNrT41gxnUhnWefjXHIuCFijXgRhFqe16LX6L@3YXOJSYWomGKAsxEc9QC_ihAx46y8GrXyJLHRz7AUaOVAb9UBdfk3Elw7TTMHSCeCyuP5QyWNpZ2NcGk9PRVoapOtJSCahiGt1HKvN1iNErSmiiwuBrslP0FTn7bpa5zhYn5KeEG1FLXyIHOoBfXDpuCWrkqMsNeCVCVJ0zocGv81j051dYbR6jgrKonDjH@3U7NhEaGlnCWD9ib5qYNQ4KrYejuvFMtzAdLeqGhKuNaTW5nlfb63pqiHf9@K2D37Ypujo27L8fsDdyxVV_axTa10MseQ_7kMdUe5My1HYcpSHN_uyUb8K8PmTe1XiVrItxeZl5bkkIZnwR5jFROXRoVxpexSVUq4dEGp1@qarB9wpmVBYGGvPagTHSxUmwnEUBXUQGxYWXfCYdff6Y_jHtePxYZOJJc0C9sYDuF0laJ78TlFs7jBiF9TIuxN0j9vjRq__5rx9_@G93j5a4kYdLA1S2vEGDhrH84gIaNzdWff7MPO2djSW700Kgl8TfFbhFWNj0gH3vBPO28avdrnquL0fNsEJ83WtUt5ZgZBUXxBjYXZBySUL3ScnJipDgxfWtOfBdNqnxpUVyzEVzOh0hYFEcgUCNw9aogrwdNWru0QMgs2ByPgkmggD29g9Gcl6SYiduknogJ4BHLXFIr_XQkl2X3bTen0OefHToIK0HFqoAco3Ch3Xk6KvWRBaemvkYb4qN8d9_8d7W@wTrcgGGlZOOvNd8xp7Ra4yqNxYVfDYRrzaaZPnZ514LOUjwCzBaVkB2KFD6vSTJq4MgAYYUawq0eqMiW@chjtIUamCQZonAiNw7r0nVAAJzgqQo6znVCTy2p_t9fV4gsUkmCFZ1TE5bzs3zYGFfjzP4TzYaq0Qfz1Q_9VdDoC2jOusOrhXnPORgUeS4YtE8zcaLLDt3thYHE1vaNhBg7qwTARYzAE83WkRxWA7eDMCxA5shKEu6JUzGM7jsFFU8RwMritWDISLH832PpDk8OqcLrefsn47YPXEF6d7bYcu0q2_6DlUVfPMsIeeNbKFXgVRBnsk2q7_Dw9DHZ9Kuqx8bCn9B1fM@xZw1fbfbqu8NpAcmZF6_2d2wOmm42UaEb6majAiwyheyKGJheJlbXupV2W1jXH5kvWlEXUgm46igV@@ATJ5la1lPmHzBovkSmCLkKRYOV8c6k8lkiIWQ2SCcE0z2xnoD206XiMGbD3xcm6@G8Ye66MS3IFfI0EZs9b6narbQVKPRWt1Rb5LVAEaFiazxkpUzjly5xYLDoR1RtA7ktQiALRfRck6j14JWxpmLMS3DGz1B@4bqdaZ4hAX7hYFpEV7U66VSnkvx0g4sE5By82r1ZNvEiMKUW7BThllHpmTfJcpMLuzelsflgPDgiHro7GbFgF9Wb_tCjwnzal9LmtMF9onJRPFCQKt8m0sev6v40CoBkM3@xEOqBEOX02cI8zKgt9BcxMU6SKCneB9PXCh@QiBZipdD2cmTY@KjzzoY5nPgBllihPhEi1rwheRNUxUFqw6SdGP5ngHDaql1rP4wworY09xdiSURmbKY1agaqMXEYn@Ahfy1dGPPYVjQUbb15OhYYmk7tCeQeEU81KB2NbR8r5Z6eRtIsuMnB7_61f4nWBVxjCdBBayiRC2PwjlGiWi4fySkjZVIcAPvkSnNjUNg2ER1jaXWAR8YDWfZjDFXw1fZDBx_z1yMCCRFcbFKAkFX6nVhTbRPFgcwmHzsOfCGztvgDS1sJKY7wskYCjXcR6316GBQu5XffZiJB05Km8KurPNkoM0w@fJNtMM8l@uk0CwyH4J6XV1NUsCs4b7Dg2_PUQBWe_HkhfWTiDu5EXeCL8sIEvYspheJufC3GninjTcGLemlNPt7e_LgdO8ecTBt@sSAAk_3_GUk8DuxTwatSaq31uBQdLuf_YHndUdeHbBBwwP7iTgWw_5f7XmsDZMTSnVRb5I7EtSgkxQ6o6f6uBvW3N3SIBG5@t7XCPaGk3ydDlRamDKZGluCO3cqDeVCIB3fhfdFNnNsoFy6Trm3JtP0oaBp7WY2lZ9XVeV3QJle4FUzpNb1KYwSajgkMOtuA9ofY@eu093anl79a6b62_qmIgYdm@q6KwmbYaaVwJ_1RBt7P2CKxt3CI_bJ3q0NZO5CfZh9xzAfye72yK4_gPe2iP1_KN6xABEfsTFsJP5v_71zVH1wGPeB_J8xuBFP6aif3675n6HTIzTtKb62w1ba@zsr7ddAdmkkILar7b1Wtb3fX233JurrKu39XZT2frfShpYH17SAnovTwNNFzvl1UHrwPlF6sBtKD3ZB6UFfO@iXQMdYh2gsMm6UTYSWEBpEdR_k_eimnWXsTTXTNZSh_fkwdNMHtIz94VvHQiiR_SJLYBCgmmRDrj@d08wpTIeJOLMxkUYzCvyRaOyPxd5b1Dwgp8XreUEZdl8ERRyyl_qoQkSmXM4rSggUBjKlXVeSIslAPivlSnx0mxqfD0NG3NoibryG7SQ7wuTkWJ@AtFAjBdLoApsmxiDdUH7ERzJsfn5mZPh@FNXPWNe8d8btsi2P8eKHZlhLgZRZxpbrcPGRZ5sf0@26Odf22b9@ordxskyH8Y_Vy0zwi2UKqLNVAGuftYaOIABtumzgDKLr0S_inF6aIDHsyqRhMpmGOqitmPArPDa1TghN20geKY6zubkIOh3Lz@gAuvBhwb5R2kqdkVMhkGLoih7QzZq24jr2i2DUqao7sa79xNNNImpu3ZRonMui81w_kvWGmB2d@piL7C67oV9EQxhoZWYDaa3YVBs2quePNl60VYs8dWipXfru36DvQbXyty4CkyEuTZO1Y@mWUDOZ7CoX3r5yS4kB@z1rlphcLHIzZbnwy0AlYvJIJCCnWXVXQEKtX8E1mRJ5XtX_xvoJjKPMV1f_rEOvwxY4kkIa9Wbe7CaqHBnd1hFc56rrS55sWTMmBu7J6i56_ZhHet1FtgyHG6YIgDlOafGTrfZc58KqW720bbba72pev3CdrQ66mh@0IUocG8Pc8J1l@_i_g7ftOK2sepEXqh1Mham2DWnFa0NU4c1xWXzIrqozQgC1QkEtl3ZZdfmmh1lhvetvv7utJcIcgvYnM_uD4U72Iq3NIARNhkQM@BrYlpgDsB8m@bXRX6cNiR@3dXf7tiShZ0d7khZyuzYlfqrY83UhXNMdxE99PVtpavvnVtfTCKrhp068MOmepGs5O19kM023f1d6vRbR3Aa1fmi7u99zd1utC1qkY7MPtoRGP4qn3p__jw0_6L3hIksIlZKojIb2bZxrLXmr5km9hNyHpuO3Wig_gQV0Gyl2ngQtr5ekr9koWJ0Bs6P_UaTAz17sy7MweiuadrA@ON9kqzC22Gbvg_JM3tfc97ewvHVmSutyMPyeffBk2nXs3t498kju7d_7x7DxbnxKgZ@bnTDipxbsdoP5iMPOz@4ic2@rjES9aIlJigq2Jw6YYH4yUZ0dZGejwXaBdA3jlG4WNdEujFUVOfmI9na0yxsuCvFVASAX3m29YEWrhG5AhaBIfm_ci@g_qgfj82Goh5@JX31bOLy5eoAVFawKoQRY4JHSnzWXo9DqyTAfun198HfSEX1FFcokK3xVF1ofBdXunw@IyT5uT_Pz_7E9By3M6LqIrCs5sC@TbBYk7Di9iPMspeJPL8VFcZ4XxqvlRYlX@b5xfKv3Oo1DOo2mA208fV9tykWWMlFAR5X4x_7cAE5yESZU6HvmupDs1GinL6WHOadR6u@rl1V@FxzBYI0mqr@DskaUnMVb8eIV8y2j09uHaPH@Si14AG19aIOFb8U1cnHCX@YbqxBeVkwk1Deyx1vMqfBKEIn1EiMyLQelZR8Qc7S8W2CQVX6n9qOcKf0sXubcKNuvmtCam0hWt@PVKBrLFStHfLY@85dZhFdeGljzqseg4YTvUNG9ed_J2dts4OhvXp529jcbOPo3XwXuhNJs5oCFZYeDtnmoh9CPdGPVDayLkPui9mXh7Gu1aAJo1OBx4rHWqAlmh2p_DgR1dHbMuFG0zj3nRrMmqMZr0J2QGq0c29f@QvV@IHXzGmxdJue1euvJjz_8dRnE6Y8__M0shyMLOIYMn1X1unKOdekuOEtBXM1B3mEBugxzrtKxKm5RygI8OtdplmeXWNFfJhlN7mBRIhDOqwTlpa5N5Pt4Uc33BYvrUhouKSD0h8z1amIjSxPERtUPAWlEHFr8RmMYgsSSH2J77codVCZ3NYlTX65r2AmvJlNuAWJNyohCoE7RUaNO_bnJ6IZckXR1I3B1eVPng1uZc2NPRy4x9V6G7pZjrugVfW5Icy6J9n6Gaqe72x7JJVv_PgOZovfaI1IfWSLIKPDpl0F@xkuq3EO_eyO7YIxL_G2z1G@ploz1Mer3SI9j4JXv9p998vjZcVn8fvnL3149@s3T5bNvDn67@M3Vu2L95e@_nYVPcnp35P8BdvUGCw--). Let us try the SmartPy FA2 contract.

You can go to [SmartPy IDE](https://smartpy.io/ide) and pick up the FA2 contract template. You will see a lot of usefull comments. The first definition is the `FA2_config` class. It is used for metaprogramming, which we saw in the SmartPy section:

```python
        # The option `debug_mode` makes the code generation use
        # regular maps instead of big-maps, hence it makes inspection
        # of the state of the contract easier.

        self.single_asset = single_asset
        # This makes the contract save some gas and storage by
        # working only for the token-id `0`.
        ...
```

so the configuration is flexible and offers an easy adjustable contract. Then you will see some type definitions, e.g. `Batch_transfer` which represents a [transfer batch](https://gitlab.com/tzip/tzip/-/blob/master/proposals/tzip-12/tzip-12.md#transfer). 

Then you see the class `FA2_core` which implements the FA2 strict standard. In it you can find the definition of the entry points we mentioned before:

```python
    @sp.entry_point
    def transfer(self, params):
      ...

    @sp.entry_point
    def balance_of(self, params):
      ...

    @sp.entry_point
    def update_operators(self, params):
      ...
```

and

```python
self.token_meta_data = Token_meta_data(self.config)
```

With some other classes, which implement usefull functions, it is inherited by the `FA2` class.

```python
class FA2(FA2_change_metadata, FA2_token_metadata, FA2_mint, FA2_administrator, FA2_pause, FA2_core)
```

In addition, `FA2` class will implement:

```python
    @sp.offchain_view(pure = True)
    def is_operator(self, query):
      ...
```

and

```python
        self.init_metadata("metadata_base", metadata_base)
```

as well as 


```python
    sp.add_compilation_target("FA2_comp", FA2(config = environment_config(),
                              metadata = sp.metadata_of_url("https://example.com"),
                              admin = sp.address("tz1M9CMEtsXm3QxA7FmMU2Qh7xzsuGXVbcDr")))
```

We have not used the metadata standard for Tezos smart contracts, [Tzip16](https://gitlab.com/tzip/tzip/-/blob/master/proposals/tzip-16/tzip-16.md), so far [with SmartPy](https://smartpy-io.medium.com/metadata-in-smartpy-3eb09fcd1de7). Basically some data can be stored off-chain with a link on-chain (as `big_map %metadata string bytes`) to be easier accessible. 

You can [deploy and test such a contract](https://assets.tqtezos.com/docs/token-contracts/fa2/1-fa2-smartpy/) to play with it. Here let us have a quick look at the tests this implementation includes. Those will let you remember the FA2 definition.

Have a look at the multi token transfer test:

```python
        scenario.h3("Multi-token Transfer Bob -> Alice")
        scenario += c1.transfer(
            [
                c1.batch_transfer.item(from_ = bob.address,
                                    txs = [
                                        sp.record(to_ = alice.address,
                                                  amount = 10,
                                                  token_id = 0),
                                        sp.record(to_ = alice.address,
                                                  amount = 10,
                                                  token_id = 1)]),
                # We voluntarily test a different sub-batch:
                c1.batch_transfer.item(from_ = bob.address,
                                    txs = [
                                        sp.record(to_ = alice.address,
                                                  amount = 10,
                                                  token_id = 2)])
            ]).run(sender = bob)
```

How would such transactions look like in Michelson? We can easly see it in the IDE:

```json
{
  "prim": "Right",
  "args": [
    {
      "prim": "Right",
      "args": [
        {
          "prim": "Left",
          "args": [
            [
              {
                "prim": "Pair",
                "args": [
                  { "string": "tz1Ns3YQJR6piMZ8GrD2iYu94Ybi1HFfNyBP" },
                  [
                    { "prim": "Pair", "args": [ { "string": "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" }, { "prim": "Pair", "args": [ { "int": "0" }, { "int": "10" } ] } ] },
                    { "prim": "Pair", "args": [ { "string": "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" }, { "prim": "Pair", "args": [ { "int": "1" }, { "int": "10" } ] } ] }
                  ]
                ]
              },
              {
                "prim": "Pair",
                "args": [
                  { "string": "tz1Ns3YQJR6piMZ8GrD2iYu94Ybi1HFfNyBP" },
                  [ { "prim": "Pair", "args": [ { "string": "tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi" }, { "prim": "Pair", "args": [ { "int": "2" }, { "int": "10" } ] } ] } ]
                ]
              }
            ]
          ]
        }
      ]
    }
  ]
}
```

You can see that we transfer `from_` the address `tz1Ns3YQJR6piMZ8GrD2iYu94Ybi1HFfNyBP` `to_`:

- `tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi` 10 tokens of type 0
- `tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi` 10 tokens of type 1
- `tz1WxrQuZ4CK1MBUa2GqUWK1yJ4J6EtG1Gwi` 10 tokens of type 2

<HighlightBox type="reading">

* [Using FA2-SmartPy](https://assets.tqtezos.com/docs/token-contracts/fa2/1-fa2-smartpy/)
* [How to extend an FA2 contract in CameLigo](https://medium.com/coinmonks/how-to-extend-an-fa2-contract-in-cameligo-a673858cbe2b)

</HighlightBox>
